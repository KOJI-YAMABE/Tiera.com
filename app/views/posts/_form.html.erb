<%= form_with model: post, local: true do |f| %>
    <%= attachment_image_tag post, :image, id: :img_prev, fallback: "no_image.jpg", class: "update-img" %>
    <%= f.attachment_field :image, id: :image %>

    <p class="margin-top">ゴミの数</p>
    <%= f.select :garbage_count, [*(1..50)], {selected: 1}, class: "garbage_count" %> 個
    <span class="help-block"></span>

    <p class="margin-top">参加人数</p>
    <%= f.select :join_amount, [*(1..50)], {selected: 1}, class: "join_amount" %> 人
    <span class="help-block"></span>

    <p class="margin-top">日時</p>
    <%= f.date_field :published_at, class: 'form-control' %>
    <%= f.time_field :published_at, class: 'form-control' %>
    <span class="help-block"></span>

    <%= f.text_area :content, autofocus: true, autocomplete: "content", placeholder: "コメント入力", class: "content form-control" %>
    <span class="help-block"></span>

    <div class="flex align-center pl5">
      <%= f.submit "保存" , class: "btn btn-primary" %>
    </div>
<% end %>

<!-- アップロードしたばかりの画像のプレビューを表示する-->
<script type="text/javascript">
$(function() {
 function readURL(input) {
   if (input.files && input.files[0]) {
     var reader = new FileReader();
     reader.onload = function (e) {
       $('#img_prev').attr('src', e.target.result);
     }
     reader.readAsDataURL(input.files[0]);
   }
 }
 $("#image").change(function(){
   readURL(this);
 });
});
</script>